# Przykładowy serwer wirtualny Nginx (reverse proxy + statyki) z komentarzami.
server {
    listen 80;                                       # port HTTP
    server_name example.com;                         # nazwa domeny (zmień)

    # Serwuj pliki statyczne z katalogu /var/www/html
    root /var/www/html;                              # katalog dokumentów
    index index.html index.htm;                      # pliki domyślne

    access_log /var/log/nginx/example_access.log main; # log dostępu
    error_log  /var/log/nginx/example_error.log warn;  # log błędów

    # Blok location dla statyków
    location / {
        try_files $uri $uri/ =404;                   # szukaj pliku lub zwróć 404
    }

    # Reverse proxy do backendu (np. Node/Java/Python) na porcie 4000
    location /api/ {
        proxy_pass         http://backend:4000;      # adres backendu (kontener/dns)
        proxy_set_header   Host $host;               # przekazuj nagłówek Host
        proxy_set_header   X-Real-IP $remote_addr;   # IP klienta
        proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for; # łańcuch IP
        proxy_set_header   X-Forwarded-Proto $scheme; # protokół
    }

    # Przekierowanie HTTP -> HTTPS (zakomentowane, użyj gdy masz certy)
    # return 301 https://$host$request_uri;
}

# ---
# Dlaczego tak:
# - root/index + try_files serwują statyki i zwracają 404, gdy pliku brak, co jest bezpiecznym domyślnym zachowaniem.
# - Oddzielny blok /api reverse-proxy przekazuje nagłówki IP/proto, ułatwiając logowanie i poprawną generację absolutnych URL w backendzie.
# - Własne access_log/error_log per serwer pozwalają szybciej diagnozować problemy danej aplikacji.
# - Zakomentowane przekierowanie na HTTPS pokazuje miejsce do włączenia TLS po uzyskaniu certyfikatu. 
